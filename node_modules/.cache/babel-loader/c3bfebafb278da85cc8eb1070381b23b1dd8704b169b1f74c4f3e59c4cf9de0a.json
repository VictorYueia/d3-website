{"ast":null,"code":"import React,{useRef,useEffect}from\"react\";import*as d3 from\"d3\";import{jsx as _jsx}from\"react/jsx-runtime\";export var data=[{category:\"Good\",percentage:43.51},{category:\"Moderate\",percentage:38.68},{category:\"Unhealthy\",percentage:9.07},{category:\"Unhealthy for Sensitive Groups\",percentage:6.92},{category:\"Very Unhealthy\",percentage:1.09},{category:\"Hazardous\",percentage:0.73}];export var color=d3.scaleOrdinal([\"#4daf4a\",\"#B0D9B1\",\"#ff7f00\",\"#BF8B67\",\"#9D5353\",\"#632626\"]);var PieChart=function PieChart(){var ref=useRef();useEffect(function(){var pie=d3.pie().value(function(d){return d.percentage;});var width=600;var height=600;var radius=Math.min(width,height)/2-50;var arc=d3.arc().outerRadius(radius).innerRadius(0);var arcOver=d3.arc().outerRadius(radius+10).innerRadius(0);// Arc for mouseover state\nvar svg=d3.select(ref.current).attr(\"class\",\"pie\").attr(\"width\",width).attr(\"height\",height+60);var g=svg.append(\"g\").attr(\"transform\",\"translate(\".concat(width/2,\", \").concat(height/2,\")\"));var arcs=g.selectAll(\"arc\").data(pie(data)).enter().append(\"g\").attr(\"class\",\"arc\");arcs.append(\"path\").attr(\"d\",arc).attr(\"fill\",function(d){return color(d.data.category);});var labels=arcs.append(\"text\").attr(\"transform\",function(d){return\"translate(\".concat(arc.centroid(d),\")\");}).attr(\"text-anchor\",\"middle\").style(\"visibility\",\"hidden\")// Make the labels initially hidden\n.text(function(d){return d.data.category;}).style(\"font-weight\",\"bolder\");// Add hover event listener to the arcs\narcs.on(\"mouseover\",function(event,d){// Show the label of the hovered arc\nlabels.filter(function(d2){return d2===d;}).style(\"visibility\",\"visible\");// Increase the size of the hovered arc\nd3.select(this).select(\"path\").attr(\"d\",arcOver);}).on(\"mouseout\",function(event,d){// Hide the label when not hovering\nlabels.filter(function(d2){return d2===d;}).style(\"visibility\",\"hidden\");// Return the arc back to its original size\nd3.select(this).select(\"path\").attr(\"d\",arc);});svg.append(\"text\").attr(\"x\",width/2).attr(\"y\",height+10).style(\"text-anchor\",\"middle\").style(\"font-size\",\"18px\").style(\"font-weight\",\"bolder\").text(\"Chart2: Proportion of cities displayed according to PM2.5 AQI\");},[]);return/*#__PURE__*/_jsx(\"svg\",{ref:ref});};export default PieChart;","map":{"version":3,"names":["React","useRef","useEffect","d3","jsx","_jsx","data","category","percentage","color","scaleOrdinal","PieChart","ref","pie","value","d","width","height","radius","Math","min","arc","outerRadius","innerRadius","arcOver","svg","select","current","attr","g","append","concat","arcs","selectAll","enter","labels","centroid","style","text","on","event","filter","d2"],"sources":["/Users/yinjia/Desktop/react-d3/d3-website/src/components/page1/PM25PieChart.js"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\nexport const data = [\n  { category: \"Good\", percentage: 43.51 },\n  { category: \"Moderate\", percentage: 38.68 },\n  { category: \"Unhealthy\", percentage: 9.07 },\n  { category: \"Unhealthy for Sensitive Groups\", percentage: 6.92 },\n  { category: \"Very Unhealthy\", percentage: 1.09 },\n  { category: \"Hazardous\", percentage: 0.73 },\n];\n\nexport const color = d3.scaleOrdinal([\n  \"#4daf4a\",\n  \"#B0D9B1\",\n  \"#ff7f00\",\n  \"#BF8B67\",\n  \"#9D5353\",\n  \"#632626\",\n]);\n\nconst PieChart = () => {\n  const ref = useRef();\n\n  useEffect(() => {\n    const pie = d3.pie().value((d) => d.percentage);\n\n    const width = 600;\n    const height = 600;\n    const radius = Math.min(width, height) / 2 - 50;\n\n    const arc = d3.arc().outerRadius(radius).innerRadius(0);\n    const arcOver = d3\n      .arc()\n      .outerRadius(radius + 10)\n      .innerRadius(0); // Arc for mouseover state\n\n    const svg = d3\n      .select(ref.current)\n      .attr(\"class\", \"pie\")\n      .attr(\"width\", width)\n      .attr(\"height\", height + 60);\n\n    const g = svg\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 2}, ${height / 2})`);\n\n    const arcs = g\n      .selectAll(\"arc\")\n      .data(pie(data))\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"arc\");\n\n    arcs\n      .append(\"path\")\n      .attr(\"d\", arc)\n      .attr(\"fill\", (d) => color(d.data.category));\n\n    const labels = arcs\n      .append(\"text\")\n      .attr(\"transform\", (d) => `translate(${arc.centroid(d)})`)\n      .attr(\"text-anchor\", \"middle\")\n      .style(\"visibility\", \"hidden\") // Make the labels initially hidden\n      .text((d) => d.data.category)\n      .style(\"font-weight\", \"bolder\");\n\n    // Add hover event listener to the arcs\n    arcs\n      .on(\"mouseover\", function (event, d) {\n        // Show the label of the hovered arc\n        labels\n          .filter(function (d2) {\n            return d2 === d;\n          })\n          .style(\"visibility\", \"visible\");\n        // Increase the size of the hovered arc\n        d3.select(this).select(\"path\").attr(\"d\", arcOver);\n      })\n      .on(\"mouseout\", function (event, d) {\n        // Hide the label when not hovering\n        labels\n          .filter(function (d2) {\n            return d2 === d;\n          })\n          .style(\"visibility\", \"hidden\");\n        // Return the arc back to its original size\n        d3.select(this).select(\"path\").attr(\"d\", arc);\n      });\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", height + 10)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"bolder\")\n      .text(\"Chart2: Proportion of cities displayed according to PM2.5 AQI\");\n  }, []);\n\n  return <svg ref={ref}></svg>;\n};\n\nexport default PieChart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}