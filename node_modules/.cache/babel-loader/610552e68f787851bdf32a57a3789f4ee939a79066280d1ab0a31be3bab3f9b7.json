{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import*as d3 from\"d3\";import{feature}from\"topojson-client\";import us from\"../Data/usa-states-10m.json\";import data from\"../Data/map-co-data.json\";import{jsx as _jsx}from\"react/jsx-runtime\";function CoMap(){var ref=useRef();var width=900;var height=650;useEffect(function(){var svg=d3.select(ref.current);svg.selectAll(\"*\").remove();// render and update\nvar projection=d3.geoAlbersUsa().fitSize([width,height],feature(us,us.objects.states));var path=d3.geoPath().projection(projection);svg.append(\"g\").selectAll(\"path\").data(feature(us,us.objects.states).features).join(\"path\").attr(\"d\",path).attr(\"stroke\",\"#000\").attr(\"fill\",\"#BDCDD6\");// add city points\nvar circles=svg.selectAll(\"circle\").data(data).enter().append(\"circle\").attr(\"cx\",function(d){var _projection;return(_projection=projection(d.coordinates))===null||_projection===void 0?void 0:_projection[0];}).attr(\"cy\",function(d){var _projection2;return(_projection2=projection(d.coordinates))===null||_projection2===void 0?void 0:_projection2[1];}).attr(\"r\",\"5px\").attr(\"fill\",\"yellow\").attr(\"stroke\",\"black\")// Add this line to add a border color\n.attr(\"stroke-width\",\"1px\");// Add this line to define the border width\n// add city names\nsvg.selectAll(\".city-label\").data(data).enter().append(\"text\").attr(\"class\",\"city-label\").style(\"visibility\",\"hidden\")// Make the labels initially invisible\n.attr(\"x\",function(d){return projection(d.coordinates)[0]-35;}).attr(\"y\",function(d){return projection(d.coordinates)[1];}).text(function(d){return d.city;}).attr(\"font-size\",\"15px\").attr(\"font-weight\",\"bold\").attr(\"text-anchor\",\"middle\").attr(\"fill\",\"black\");circles.on(\"mouseover\",function(event,d){// Show the label of the hovered circle\nsvg.selectAll(\".city-label\").filter(function(d2){return d2===d;}).style(\"visibility\",\"visible\");}).on(\"mouseout\",function(event,d){// Hide the label when not hovering\nsvg.selectAll(\".city-label\").filter(function(d2){return d2===d;}).style(\"visibility\",\"hidden\");});svg.append(\"text\").attr(\"x\",width/2).attr(\"y\",height-10).style(\"text-anchor\",\"middle\").style(\"font-size\",\"18px\").style(\"font-weight\",\"bolder\").text(\"Chart3: Top 10 cities with the highest CO AQI value in USA\");},[data]);return/*#__PURE__*/_jsx(\"svg\",{ref:ref,style:{width:width,height:height}});}export default CoMap;","map":{"version":3,"names":["React","useEffect","useRef","d3","feature","us","data","jsx","_jsx","CoMap","ref","width","height","svg","select","current","selectAll","remove","projection","geoAlbersUsa","fitSize","objects","states","path","geoPath","append","features","join","attr","circles","enter","d","_projection","coordinates","_projection2","style","text","city","on","event","filter","d2"],"sources":["/Users/yinjia/Desktop/react-d3/d3-website/src/components/page2/CoMap.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport { feature } from \"topojson-client\";\nimport us from \"../Data/usa-states-10m.json\";\nimport data from \"../Data/map-co-data.json\";\n\nfunction CoMap() {\n  const ref = useRef();\n  const width = 900;\n  const height = 650;\n\n  useEffect(() => {\n    const svg = d3.select(ref.current);\n    svg.selectAll(\"*\").remove(); // render and update\n\n    const projection = d3\n      .geoAlbersUsa()\n      .fitSize([width, height], feature(us, us.objects.states));\n\n    const path = d3.geoPath().projection(projection);\n\n    svg\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(feature(us, us.objects.states).features)\n      .join(\"path\")\n      .attr(\"d\", path)\n      .attr(\"stroke\", \"#000\")\n      .attr(\"fill\", \"#BDCDD6\");\n\n    // add city points\n    const circles = svg\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", function (d) {\n        return projection(d.coordinates)?.[0];\n      })\n      .attr(\"cy\", function (d) {\n        return projection(d.coordinates)?.[1];\n      })\n      .attr(\"r\", \"5px\")\n      .attr(\"fill\", \"yellow\")\n      .attr(\"stroke\", \"black\") // Add this line to add a border color\n      .attr(\"stroke-width\", \"1px\"); // Add this line to define the border width\n\n    // add city names\n    svg\n      .selectAll(\".city-label\")\n      .data(data)\n      .enter()\n      .append(\"text\")\n      .attr(\"class\", \"city-label\")\n      .style(\"visibility\", \"hidden\") // Make the labels initially invisible\n      .attr(\"x\", function (d) {\n        return projection(d.coordinates)[0] - 35;\n      })\n      .attr(\"y\", function (d) {\n        return projection(d.coordinates)[1];\n      })\n      .text(function (d) {\n        return d.city;\n      })\n      .attr(\"font-size\", \"15px\")\n      .attr(\"font-weight\", \"bold\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"fill\", \"black\");\n\n    circles\n      .on(\"mouseover\", function (event, d) {\n        // Show the label of the hovered circle\n        svg\n          .selectAll(\".city-label\")\n          .filter(function (d2) {\n            return d2 === d;\n          })\n          .style(\"visibility\", \"visible\");\n      })\n      .on(\"mouseout\", function (event, d) {\n        // Hide the label when not hovering\n        svg\n          .selectAll(\".city-label\")\n          .filter(function (d2) {\n            return d2 === d;\n          })\n          .style(\"visibility\", \"hidden\");\n      });\n\n    svg\n      .append(\"text\")\n      .attr(\"x\", width / 2)\n      .attr(\"y\", height - 10)\n      .style(\"text-anchor\", \"middle\")\n      .style(\"font-size\", \"18px\")\n      .style(\"font-weight\", \"bolder\")\n      .text(\"Chart3: Top 10 cities with the highest CO AQI value in USA\");\n  }, [data]);\n\n  return <svg ref={ref} style={{ width: width, height: height }} />;\n}\n\nexport default CoMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}